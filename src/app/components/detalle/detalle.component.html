<ion-content>

  <ion-label class="titulo">
    <h1>{{detallesPelicula.title}}</h1>
  </ion-label>
  <img [src]="detallesPelicula.backdrop_path | imagen" *ngIf="detallesPelicula.backdrop_path">
  <img src="/assets/no-image-banner.jpg" *ngIf="!detallesPelicula.backdrop_path">

  <ion-grid>
    <ion-row>

      <ion-col size="4" class="poster-detalle-sobre">
        <ion-card class="poster">
          <img class="poster" *ngIf="!detallesPelicula.poster_path" src="/assets/no-image-banner.jpg">
          <img class="poster" *ngIf="detallesPelicula.poster_path" [src]="detallesPelicula.poster_path | imagen">
        </ion-card>

      </ion-col>

      <ion-col size="8">
        <ion-item>
          <ion-icon slot="start" name="thumbs-up-outline" color="primary"></ion-icon>
          <ion-label>Rating</ion-label>
          <ion-note slot="end" color="primary">{{detallesPelicula.vote_average}}</ion-note>
        </ion-item>

        <ion-item>
          <ion-icon slot="start" name="people-outline" color="primary"></ion-icon>
          <ion-label>Votos</ion-label>
          <ion-note slot="end" color="primary">{{detallesPelicula.vote_count}}</ion-note>
        </ion-item>
      </ion-col>

    </ion-row>
  </ion-grid>

  <ion-grid fixed>
    <ion-row>

      <ion-col size="12">
        <!--  Este pipe slice viene con angular solo debemos usar en los imports
        import { NgIf, CommonModule } from '@angular/common';
        y luego
        imports: [CommonModule]
        para poder usarlo. Nos permite restringir la cantidad de texto que va aparecer.
             <ion-label>{{detallesPelicula.overview | slice: 0:150 }}</ion-label>
        Podemos podemos ... para indicar de manera visual que hay mas texto y algun clicable
        para mostrar el resto tal como se ve a continuacion. 
        
        Creo una propiedad "oculto = 150" en el ts y reemplado el 150 por oculto
        <ion-label>{{detallesPelicula.overview | slice: 0:oculto }}</ion-label>
        Y a la label con leer mas le digo que al pulsarlo se ponga el valor de oculto a 
        un numero muy alto para asegurar que se muestre todo.

        Implemento además una forma de que se muestre o se oculte tanto el texto como que cambie el
        texto del label para hacer un leer mas o leer menos
        -->
        <ion-label>{{detallesPelicula.overview | slice: 0:oculto }}</ion-label>
        <ion-label color="primary" (click)="toogleOculto()" *ngIf=" oculto!==5000">...Leer más</ion-label>
        <ion-label color="primary" (click)="toogleOculto()" *ngIf="oculto===5000"> Leer menos</ion-label>
      </ion-col>

    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-chip color="primary" *ngFor="let genero of detallesPelicula.genres">
          <ion-label (click)="mostrarPeliculasDeGenero(genero)" color="primary">{{genero.name}}</ion-label>
        </ion-chip>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid fixed>
    <ion-row>
      <ion-col size="6"></ion-col>
      <ion-col size="6"></ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid fixed *ngIf="mostrarPeliculasPorGenero">
    <ion-row>
      <ion-col>
        <h3>Películas del género {{generoElegido.name}}</h3>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Slideshow de películas -->
  <div *ngIf="mostrarPeliculasPorGenero">
    <p>Número de películas: {{peliculasPorGenero.length}}</p>
    <app-slideshow-poster [peliculasRecientesEnComponentePoster]="peliculasPorGenero">
    </app-slideshow-poster>
  </div>

  <ion-grid fixed>
    <ion-row>
      <ion-col>
        <ion-label>Actores</ion-label>
      </ion-col>

    </ion-row>
  </ion-grid>

  <swiper-container [slidesPerView]="swiperOptsActores.slidesPerView" [attr.free-mode]="freeModeString">

    <swiper-slide *ngFor="let actor of actoresPelicula">
      <ion-card class="card-actor">
        <img *ngIf="!actor.profile_path" src="/assets/no-avatar.jpg" alt="">
        <img *ngIf="actor.profile_path" [src]="actor.profile_path | imagen" alt="">
        <ion-label>{{actor.name}}</ion-label>
      </ion-card>
    </swiper-slide>
  </swiper-container>

</ion-content>

<ion-footer>
  <ion-toolbar>

    <ion-buttons slot="start">
      <ion-button (click)="cerrarModal()" expand="block" shape="round">
        <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
        <ion-label>Volver</ion-label>
      </ion-button>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button (click)="addFavorito(detallesPelicula)">
        <ion-icon slot="start" name="heart-outline"></ion-icon>
        <ion-label>Favorito</ion-label>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-footer>